(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],{39:function(e,t,a){e.exports=a(61)},50:function(e,t,a){},53:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),s=a.n(r),l=a(14),c=a(8);var i=a(6);var u=a(13),m=a.n(u),d=Object(l.combineReducers)({authedUser:function(e=null,t){switch(t.type){case"SET_AUTHED_USER":return t.id;case"UNSET_AUTHED_USER":return null;default:return e}},users:function(e={},t){switch(t.type){case"RECEIVE_USERS":return Object(i.a)({},e,{},t.users);case"ADD_USER_ANSWER":const a=t.authedUser,n=t.qid,o=t.answer;return Object(i.a)({},e,{[a]:Object(i.a)({},e[a],{answers:Object(i.a)({},e[a].answers,{[n]:o})})});case"ADD_USER_QUESTION":return Object(i.a)({},e,{[t.authedUser]:Object(i.a)({},e[t.authedUser],{questions:e[t.authedUser].questions.concat([t.qid])})});default:return e}},polls:function(e={},t){switch(t.type){case"RECEIVE_POLLS":return Object(i.a)({},e,{},t.polls);case"ADD_POLL":const a=t.poll;return Object(i.a)({},e,{[a.id]:a});case"SAVE_POLL_ANSWER":const n=t.authedUser,o=t.qid,r=t.answer;return Object(i.a)({},e,{[o]:Object(i.a)({},e[o],{[r]:Object(i.a)({},e[o][r],{votes:e[o][r].votes.concat([n])})})});default:return e}},loadingBar:u.loadingBarReducer}),p=a(35);var h=e=>t=>a=>{console.group(a.type),console.log("The action: ",a);const n=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),n},E=a(36),b=Object(E.composeWithDevTools)(Object(l.applyMiddleware)(p.a,h)),v=(a(50),a(51),a(10)),O=a(15),g=a(62),w=a(63),f=a(64);var j=Object(O.g)(Object(c.connect)((function({polls:e},{id:t}){return{poll:e[t]}}))(e=>{const t=e.poll;return o.a.createElement(g.a,{onClick:a=>((t,a)=>{t.preventDefault(),e.history.push("/questions/".concat(a))})(a,t.id)},o.a.createElement(w.a,null,o.a.createElement(f.a,null,"Would You Rather"),o.a.createElement("ul",null,o.a.createElement("li",null,t.optionOne.text),o.a.createElement("li",null,t.optionTwo.text))))})),y=a(65),x=a(66),T=a(67),S=a(68),U=a(69),q=a(70),P=a(71),k=a(5),C=a.n(k);class L extends n.PureComponent{constructor(...e){super(...e),this.state={activeTab:"1"}}toggle(e){this.state.activeTab!==e&&this.setState({activeTab:e})}render(){const e=this.props,t=e.answeredPolls,a=e.unansweredPolls;return(o.a.createElement("div",null,o.a.createElement(y.a,{tabs:!0,className:"justify-content-center"},o.a.createElement(x.a,null,o.a.createElement(T.a,{className:C()({active:"1"===this.state.activeTab}),onClick:()=>{this.toggle("1")}},"Unanswered")),o.a.createElement(x.a,null,o.a.createElement(T.a,{className:C()({active:"2"===this.state.activeTab}),onClick:()=>{this.toggle("2")}},"Answered"))),o.a.createElement(S.a,{activeTab:this.state.activeTab},o.a.createElement(U.a,{tabId:"1"},o.a.createElement(q.a,null,a.map(e=>o.a.createElement(P.a,{key:e,sm:"6",md:"4"},o.a.createElement(j,{id:e}))))),o.a.createElement(U.a,{tabId:"2"},o.a.createElement(q.a,null,t.map(e=>o.a.createElement(P.a,{key:e,sm:"6",md:"4"},o.a.createElement(j,{id:e}))))))))}}var A=Object(c.connect)((function({polls:e,users:t,authedUser:a}){const n=t[a],o=Object.keys(n.answers).sort((t,a)=>e[a].timestamp-e[t].timestamp);return{answeredPolls:o,unansweredPolls:Object.keys(e).filter(e=>!o.includes(e)).sort((t,a)=>e[a].timestamp-e[t].timestamp)}}))(L),D=a(72),R=a(73),_=a(74),z=a(75),N=a(76),I=a(77),W=a(38);class F extends n.PureComponent{render(){const e=this.props.user;return(o.a.createElement(n.Fragment,null,o.a.createElement("img",{src:e.avatarURL,className:"avatar",alt:"Avatar of ".concat(e.name)}),o.a.createElement("span",null,e.name)))}}var V=Object(c.connect)((function({users:e},{id:t}){return{user:e[t]}}))(F);let H={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://api.adorable.io/avatars/285/abdulrauf@adorable.io.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionOne",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://api.adorable.io/avatars/285/tylermcginnis@adorable.io.pngs",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://api.adorable.io/avatars/285/johndoe@adorable.io.png",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionOne"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},M={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillian"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function J(e){return new Promise((t,a)=>{const n=function({optionOneText:e,optionTwoText:t,author:a}){return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:e},optionTwo:{votes:[],text:t}}}(e);setTimeout(()=>{M=Object(i.a)({},M,{[n.id]:n}),H=Object(i.a)({},H,{[n.author]:Object(i.a)({},H[n.author],{questions:H[n.author].questions.concat([n.id])})}),t(n)},1e3)})}function Y(e,t){return(a,n)=>{const o=n().authedUser;return a(Object(u.showLoading)()),function({authedUser:e,qid:t,answer:a}){return new Promise((n,o)=>{setTimeout(()=>{H=Object(i.a)({},H,{[e]:Object(i.a)({},H[e],{answers:Object(i.a)({},H[e].answers,{[t]:a})})}),M=Object(i.a)({},M,{[t]:Object(i.a)({},M[t],{[a]:Object(i.a)({},M[t][a],{votes:M[t][a].votes.concat([e])})})}),n()},500)})}({authedUser:o,qid:e,answer:t}).then(()=>{a(function(e,t,a){return{type:"SAVE_POLL_ANSWER",authedUser:e,qid:t,answer:a}}(o,e,t)),a(function(e,t,a){return{type:"ADD_USER_ANSWER",authedUser:e,qid:t,answer:a}}(o,e,t))}).then(()=>a(Object(u.hideLoading)()))}}a(53);class B extends n.PureComponent{constructor(...e){super(...e),this.state={selectedOption:""},this.radioSelected=e=>{this.setState({selectedOption:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.savePollAnswer(this.state.selectedOption)}}render(){const e=this.props,t=e.poll,a=e.pollAuthor,n=e.isAnswered,r=e.isOptionOneAnswered;if(!t)return o.a.createElement(O.a,{to:"/404"});const s=this.state.selectedOption,l=t.optionOne.votes.length,c=t.optionTwo.votes.length,i=(l/(l+c)*100).toFixed(2),u=(c/(l+c)*100).toFixed(2),m=o.a.createElement(W.a,{size:"40",color:"green"});return o.a.createElement(q.a,null,o.a.createElement(P.a,{sm:"12",md:{size:6,offset:3}},o.a.createElement(g.a,null,o.a.createElement(D.a,null,o.a.createElement(V,{id:a.id}),o.a.createElement("div",{className:"date"},function(e){const t=new Date(e),a=t.toLocaleTimeString("en-US");return a.substr(0,5)+a.slice(-2)+" | "+t.toLocaleDateString()}(t.timestamp))),o.a.createElement(w.a,null,o.a.createElement(f.a,null,"Would You Rather"),n?o.a.createElement("ul",null,o.a.createElement("li",null,t.optionOne.text," (",l," vote(s) | ",i,"%)",r?m:null),o.a.createElement("li",null,t.optionTwo.text," (",c," vote(s) | ",u,"%)",r?null:m)):o.a.createElement(R.a,{onSubmit:this.handleSubmit},o.a.createElement(_.a,{tag:"fieldset"},o.a.createElement(_.a,{check:!0},o.a.createElement(z.a,{check:!0},o.a.createElement(N.a,{type:"radio",name:"radio1",value:"optionOne",onChange:this.radioSelected})," ",t.optionOne.text)),o.a.createElement(_.a,{check:!0},o.a.createElement(z.a,{check:!0},o.a.createElement(N.a,{type:"radio",name:"radio1",value:"optionTwo",onChange:this.radioSelected})," ",t.optionTwo.text))),o.a.createElement(I.a,{disabled:""===s},"Submit"))))))}}var Q=Object(c.connect)((function({polls:e,users:t,authedUser:a},n){const o=e[n.match.params.id],r=t[o.author],s=o.optionOne.votes.includes(a),l=o.optionTwo.votes.includes(a);return{poll:o,pollAuthor:r,isAnswered:s||l,isOptionOneAnswered:s}}),(function(e,t){const a=t.match.params.id;return{savePollAnswer:t=>{e(Y(a,t))}}}))(B),$=a(78);class G extends n.PureComponent{render(){const e=this.props.table;return(o.a.createElement($.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Rank"),o.a.createElement("th",null,"User"),o.a.createElement("th",null,"Poll Created"),o.a.createElement("th",null,"Poll Answered"))),o.a.createElement("tbody",null,e.map((e,t)=>o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,t+1),o.a.createElement("td",null,o.a.createElement(V,{id:e.id})),o.a.createElement("td",null,e.created),o.a.createElement("td",null,e.answered))))))}}var K=Object(c.connect)((function({users:e}){return{table:Object.keys(e).map(t=>({id:t,created:e[t].questions.length,answered:Object.keys(e[t].answers).length})).sort((e,t)=>t.created+t.answered-(e.created+e.answered))}}))(G);class X extends n.PureComponent{constructor(...e){super(...e),this.state={optionOne:"",optionTwo:""},this.handleOptionOneChange=e=>{e.preventDefault(),this.setState({optionOne:e.target.value})},this.handleOptionTwoChange=e=>{e.preventDefault(),this.setState({optionTwo:e.target.value})},this.handleSubmit=e=>{e.preventDefault();const t=this.state,a=t.optionOne,n=t.optionTwo;this.props.addPoll(a,n),this.props.history.push("/")}}render(){const e=this.state,t=e.optionOne,a=e.optionTwo;return(o.a.createElement(q.a,null,o.a.createElement(P.a,{sm:"12",md:{size:6,offset:3}},o.a.createElement(g.a,null,o.a.createElement(w.a,null,o.a.createElement(f.a,null,"Would You Rather"),o.a.createElement(R.a,{onSubmit:this.handleSubmit},o.a.createElement(_.a,null,o.a.createElement(z.a,{for:"optionOne"},"Option One"),o.a.createElement(N.a,{type:"text",name:"optionOne",value:t,onChange:this.handleOptionOneChange,placeholder:"Option One"})),o.a.createElement(_.a,null,o.a.createElement(z.a,{for:"optionTwo"},"Option Two"),o.a.createElement(N.a,{type:"text",name:"optionTwo",value:a,onChange:this.handleOptionTwoChange,placeholder:"Option Two"})),o.a.createElement(I.a,{disabled:""===t||""===a},"Submit")))))))}}var Z=Object(c.connect)(null,(function(e){return{addPoll:(t,a)=>{var n,o;e((n=t,o=a,(e,t)=>{const a=t().authedUser;return e(Object(u.showLoading)()),J({optionOneText:n,optionTwoText:o,author:a}).then(t=>{e({type:"ADD_POLL",poll:t}),e(function(e,t){return{type:"ADD_USER_QUESTION",authedUser:e,qid:t}}(a,t.id))}).then(()=>e(Object(u.hideLoading)()))}))}}}))(X),ee=a(79),te=a(80),ae=a(81),ne=a(82);class oe extends n.PureComponent{constructor(...e){super(...e),this.state={isOpen:!1},this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})},this.logout=e=>{e.preventDefault();const t=this.props,a=t.history,n=t.logout;a.push("/"),n()}}render(){const e=this.props.authedUser;return(o.a.createElement("div",null,o.a.createElement(ee.a,{color:"light",light:!0,expand:"md"},o.a.createElement(te.a,{tag:v.b,to:"/"},"Would You Rather"),e&&o.a.createElement(n.Fragment,null,o.a.createElement(ae.a,{onClick:this.toggle}),o.a.createElement(ne.a,{isOpen:this.state.isOpen,navbar:!0},o.a.createElement(y.a,{className:"ml-auto",navbar:!0},o.a.createElement(x.a,null,o.a.createElement(T.a,{tag:v.b,to:"/"},"Home")),o.a.createElement(x.a,null,o.a.createElement(T.a,{tag:v.b,to:"/leaderboard"},"Leaderboard")),o.a.createElement(x.a,null,o.a.createElement(T.a,{tag:v.b,to:"/add"},"Add Poll")),o.a.createElement(x.a,null,o.a.createElement(V,{id:e})),o.a.createElement(x.a,null,o.a.createElement(T.a,{onClick:this.logout},"Logout"))))))))}}var re=Object(O.g)(Object(c.connect)((function({authedUser:e}){return{authedUser:e}}),(function(e){return{logout:()=>{e({type:"UNSET_AUTHED_USER"})}}}))(oe));class se extends n.PureComponent{constructor(...e){super(...e),this.state={userId:""},this.onUserChange=e=>{this.setState({userId:e})},this.onLogin=()=>{const e=this.state.userId,t=this.props.setAuthedUser;e&&t(e)}}render(){const e=this.props.users,t=this.state.userId;return o.a.createElement(q.a,null,o.a.createElement(P.a,{sm:"12",md:{size:6,offset:3}},o.a.createElement(R.a,null,o.a.createElement(_.a,null,o.a.createElement(z.a,{for:"userSelect"},"Select User"),o.a.createElement(N.a,{type:"select",name:"select",value:t,onChange:e=>this.onUserChange(e.target.value)},o.a.createElement("option",{value:"",disabled:!0},"Please select"),Object.keys(e).map(t=>o.a.createElement("option",{key:t,value:t},e[t].name)))),o.a.createElement(I.a,{onClick:this.onLogin,disabled:!t},"Login"))))}}var le=Object(c.connect)((function({users:e}){return{users:e}}),(function(e){return{setAuthedUser:t=>{e(function(e){return{type:"SET_AUTHED_USER",id:e}}(t))}}}))(se);var ce=function(){return o.a.createElement(n.Fragment,null,o.a.createElement("div",null,"404 Not Found"),o.a.createElement(v.c,{to:"/"},"Click here ")," to go back to home page")};class ie extends n.PureComponent{componentDidMount(){this.props.handleInitialData()}render(){const e=this.props.notLoggedIn;return(o.a.createElement(v.a,null,o.a.createElement(n.Fragment,null,o.a.createElement(m.a,{className:"loading-bar"}),o.a.createElement("div",{className:"main-container"},o.a.createElement(re,null),o.a.createElement("div",{className:"container"},o.a.createElement(O.d,null,e?o.a.createElement(O.b,{path:"/",exact:!0,component:le}):o.a.createElement(n.Fragment,null,o.a.createElement(O.b,{path:"/",exact:!0,component:A}),o.a.createElement(O.b,{path:"/questions/:id",component:Q}),o.a.createElement(O.b,{path:"/add",component:Z}),o.a.createElement(O.b,{path:"/leaderboard",component:K})),o.a.createElement(O.b,{component:ce})))))))}}var ue=Object(c.connect)((function({authedUser:e}){return{notLoggedIn:null===e}}),(function(e){return{handleInitialData:()=>{e(e=>(e(Object(u.showLoading)()),Promise.all([new Promise((e,t)=>{setTimeout(()=>e(Object(i.a)({},H)),1e3)}),new Promise((e,t)=>{setTimeout(()=>e(Object(i.a)({},M)),1e3)})]).then(([t,a])=>{e(function(e){return{type:"RECEIVE_USERS",users:e}}(t)),e(function(e){return{type:"RECEIVE_POLLS",polls:e}}(a)),e(Object(u.hideLoading)())})))}}}))(ie);const me=Object(l.createStore)(d,b);s.a.render(o.a.createElement(c.Provider,{store:me},o.a.createElement(ue,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.cef28d86.chunk.js.map